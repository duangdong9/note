<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>《You-Dont-Know-JS》笔记小计 | duangdong的note</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0088ce24040b03f2947322ab31d23414";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
    <script>
  var _hmt = _hmt || [];
  _hmt.push(['_requirePlugin', 'UrlChangeTracker', {
    shouldTrackUrlChange: function (newPath, oldPath) {
      newPath = newPath.split('#')[0];
      oldPath = oldPath.split('#')[0];
      return newPath != oldPath;
    }}
  ]);
  </script>
    <meta name="description" content="前端相关知识归纳总结">
    <meta name="keywords" content="qd-blog,node,vuepress,leetcode,algorithm">
    
    <link rel="preload" href="/assets/css/0.styles.a427ee9b.css" as="style"><link rel="preload" href="/assets/js/app.6df8e219.js" as="script"><link rel="preload" href="/assets/js/2.e21ead49.js" as="script"><link rel="preload" href="/assets/js/21.5790bc21.js" as="script"><link rel="prefetch" href="/assets/js/10.e0bdad61.js"><link rel="prefetch" href="/assets/js/100.82a4c820.js"><link rel="prefetch" href="/assets/js/101.f5d94e3b.js"><link rel="prefetch" href="/assets/js/102.7f36fa51.js"><link rel="prefetch" href="/assets/js/103.085df24a.js"><link rel="prefetch" href="/assets/js/104.76789169.js"><link rel="prefetch" href="/assets/js/105.9efb3db9.js"><link rel="prefetch" href="/assets/js/106.22337f5b.js"><link rel="prefetch" href="/assets/js/107.ac8e17b4.js"><link rel="prefetch" href="/assets/js/108.5fe47bcc.js"><link rel="prefetch" href="/assets/js/109.cf88a409.js"><link rel="prefetch" href="/assets/js/11.e801cea9.js"><link rel="prefetch" href="/assets/js/110.603c3bd4.js"><link rel="prefetch" href="/assets/js/111.26f89c7d.js"><link rel="prefetch" href="/assets/js/112.1ad5bc54.js"><link rel="prefetch" href="/assets/js/113.cde31a40.js"><link rel="prefetch" href="/assets/js/114.a1a2a895.js"><link rel="prefetch" href="/assets/js/115.31c25d8b.js"><link rel="prefetch" href="/assets/js/116.8ed4b493.js"><link rel="prefetch" href="/assets/js/117.c802c1ce.js"><link rel="prefetch" href="/assets/js/118.15aead28.js"><link rel="prefetch" href="/assets/js/119.c26b6aad.js"><link rel="prefetch" href="/assets/js/12.9ed8f981.js"><link rel="prefetch" href="/assets/js/120.c3410f53.js"><link rel="prefetch" href="/assets/js/121.357fc3f4.js"><link rel="prefetch" href="/assets/js/122.6ecee0a8.js"><link rel="prefetch" href="/assets/js/123.6b38e86a.js"><link rel="prefetch" href="/assets/js/124.463231bb.js"><link rel="prefetch" href="/assets/js/125.dc9f9675.js"><link rel="prefetch" href="/assets/js/126.97f340de.js"><link rel="prefetch" href="/assets/js/127.080209f1.js"><link rel="prefetch" href="/assets/js/128.dd7fed27.js"><link rel="prefetch" href="/assets/js/129.e9a49c7b.js"><link rel="prefetch" href="/assets/js/13.fb60e043.js"><link rel="prefetch" href="/assets/js/130.86b31ea7.js"><link rel="prefetch" href="/assets/js/131.be4dca8f.js"><link rel="prefetch" href="/assets/js/132.a4e032bd.js"><link rel="prefetch" href="/assets/js/133.545d53fa.js"><link rel="prefetch" href="/assets/js/134.ef4512f0.js"><link rel="prefetch" href="/assets/js/135.b15ec030.js"><link rel="prefetch" href="/assets/js/136.14e63782.js"><link rel="prefetch" href="/assets/js/137.671e87f8.js"><link rel="prefetch" href="/assets/js/138.b3d28a52.js"><link rel="prefetch" href="/assets/js/139.bc5e381c.js"><link rel="prefetch" href="/assets/js/14.63057fe7.js"><link rel="prefetch" href="/assets/js/140.ce3a69fc.js"><link rel="prefetch" href="/assets/js/141.09737b5b.js"><link rel="prefetch" href="/assets/js/142.49e3bb24.js"><link rel="prefetch" href="/assets/js/143.45031fa6.js"><link rel="prefetch" href="/assets/js/144.458e287e.js"><link rel="prefetch" href="/assets/js/145.9d21ff24.js"><link rel="prefetch" href="/assets/js/146.88d47473.js"><link rel="prefetch" href="/assets/js/147.277b5759.js"><link rel="prefetch" href="/assets/js/148.0dd5c138.js"><link rel="prefetch" href="/assets/js/149.d638ab21.js"><link rel="prefetch" href="/assets/js/15.3ac2cfb4.js"><link rel="prefetch" href="/assets/js/150.834eb5ca.js"><link rel="prefetch" href="/assets/js/151.0b833f48.js"><link rel="prefetch" href="/assets/js/152.d212207c.js"><link rel="prefetch" href="/assets/js/153.e8b1311a.js"><link rel="prefetch" href="/assets/js/154.74eb8531.js"><link rel="prefetch" href="/assets/js/16.f2129a31.js"><link rel="prefetch" href="/assets/js/17.27a38c73.js"><link rel="prefetch" href="/assets/js/18.ec5b4213.js"><link rel="prefetch" href="/assets/js/19.553ed8c2.js"><link rel="prefetch" href="/assets/js/20.c1bf3bbb.js"><link rel="prefetch" href="/assets/js/22.29894e1b.js"><link rel="prefetch" href="/assets/js/23.bae1a497.js"><link rel="prefetch" href="/assets/js/24.1edc62bc.js"><link rel="prefetch" href="/assets/js/25.69b254ca.js"><link rel="prefetch" href="/assets/js/26.df57f236.js"><link rel="prefetch" href="/assets/js/27.9ae48125.js"><link rel="prefetch" href="/assets/js/28.d42d4bb6.js"><link rel="prefetch" href="/assets/js/29.f3630e2f.js"><link rel="prefetch" href="/assets/js/3.5c47a171.js"><link rel="prefetch" href="/assets/js/30.40cf5507.js"><link rel="prefetch" href="/assets/js/31.99b2787c.js"><link rel="prefetch" href="/assets/js/32.eef578d9.js"><link rel="prefetch" href="/assets/js/33.6755a6d2.js"><link rel="prefetch" href="/assets/js/34.add65d5c.js"><link rel="prefetch" href="/assets/js/35.3e4a0da9.js"><link rel="prefetch" href="/assets/js/36.9d4bd3f9.js"><link rel="prefetch" href="/assets/js/37.98506fd6.js"><link rel="prefetch" href="/assets/js/38.44bce283.js"><link rel="prefetch" href="/assets/js/39.62bf281f.js"><link rel="prefetch" href="/assets/js/4.8f6f0475.js"><link rel="prefetch" href="/assets/js/40.3a389edd.js"><link rel="prefetch" href="/assets/js/41.a309beb7.js"><link rel="prefetch" href="/assets/js/42.4e87216c.js"><link rel="prefetch" href="/assets/js/43.c6f6922b.js"><link rel="prefetch" href="/assets/js/44.fda8b3de.js"><link rel="prefetch" href="/assets/js/45.5a1c5b3b.js"><link rel="prefetch" href="/assets/js/46.289cbb81.js"><link rel="prefetch" href="/assets/js/47.81850ce8.js"><link rel="prefetch" href="/assets/js/48.e986629d.js"><link rel="prefetch" href="/assets/js/49.d04a41c3.js"><link rel="prefetch" href="/assets/js/5.8b87f02a.js"><link rel="prefetch" href="/assets/js/50.727fb121.js"><link rel="prefetch" href="/assets/js/51.a10ac8b0.js"><link rel="prefetch" href="/assets/js/52.4fffa0ef.js"><link rel="prefetch" href="/assets/js/53.03ab34e0.js"><link rel="prefetch" href="/assets/js/54.f05ee208.js"><link rel="prefetch" href="/assets/js/55.f90df177.js"><link rel="prefetch" href="/assets/js/56.86a4d03e.js"><link rel="prefetch" href="/assets/js/57.c8cee71c.js"><link rel="prefetch" href="/assets/js/58.0b503f53.js"><link rel="prefetch" href="/assets/js/59.c4daebc4.js"><link rel="prefetch" href="/assets/js/6.2f86309f.js"><link rel="prefetch" href="/assets/js/60.b9584ba1.js"><link rel="prefetch" href="/assets/js/61.fa6e5de3.js"><link rel="prefetch" href="/assets/js/62.4f67908f.js"><link rel="prefetch" href="/assets/js/63.0c9d8ccc.js"><link rel="prefetch" href="/assets/js/64.2754e515.js"><link rel="prefetch" href="/assets/js/65.f2bd6dd5.js"><link rel="prefetch" href="/assets/js/66.299c952c.js"><link rel="prefetch" href="/assets/js/67.2ccaf3ef.js"><link rel="prefetch" href="/assets/js/68.b6e197f0.js"><link rel="prefetch" href="/assets/js/69.b821ea5d.js"><link rel="prefetch" href="/assets/js/7.f1cc41de.js"><link rel="prefetch" href="/assets/js/70.7beae76c.js"><link rel="prefetch" href="/assets/js/71.d452a791.js"><link rel="prefetch" href="/assets/js/72.f3fd5168.js"><link rel="prefetch" href="/assets/js/73.0804c5f0.js"><link rel="prefetch" href="/assets/js/74.cdcdfbcc.js"><link rel="prefetch" href="/assets/js/75.e8e01c97.js"><link rel="prefetch" href="/assets/js/76.6801837d.js"><link rel="prefetch" href="/assets/js/77.04408d97.js"><link rel="prefetch" href="/assets/js/78.9130c8b3.js"><link rel="prefetch" href="/assets/js/79.dcf60589.js"><link rel="prefetch" href="/assets/js/8.89fa1943.js"><link rel="prefetch" href="/assets/js/80.efe0c1a1.js"><link rel="prefetch" href="/assets/js/81.8220fef3.js"><link rel="prefetch" href="/assets/js/82.ae2099d2.js"><link rel="prefetch" href="/assets/js/83.c563f161.js"><link rel="prefetch" href="/assets/js/84.e365194b.js"><link rel="prefetch" href="/assets/js/85.15de0cdb.js"><link rel="prefetch" href="/assets/js/86.b99959c5.js"><link rel="prefetch" href="/assets/js/87.6fccf3fc.js"><link rel="prefetch" href="/assets/js/88.9bc0613a.js"><link rel="prefetch" href="/assets/js/89.89530022.js"><link rel="prefetch" href="/assets/js/9.7637f327.js"><link rel="prefetch" href="/assets/js/90.53d12303.js"><link rel="prefetch" href="/assets/js/91.c55896d7.js"><link rel="prefetch" href="/assets/js/92.0fe1f724.js"><link rel="prefetch" href="/assets/js/93.d681c01d.js"><link rel="prefetch" href="/assets/js/94.ed89d267.js"><link rel="prefetch" href="/assets/js/95.96e675de.js"><link rel="prefetch" href="/assets/js/96.5ad7361e.js"><link rel="prefetch" href="/assets/js/97.e7f32727.js"><link rel="prefetch" href="/assets/js/98.c3a03e67.js"><link rel="prefetch" href="/assets/js/99.31f54446.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a427ee9b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">duangdong的note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/principle/" class="nav-link">
  JS执行
</a></div><div class="nav-item"><a href="/design-mode/" class="nav-link">
  JS设计模式
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link router-link-active">
  JS进阶
</a></div><div class="nav-item"><a href="/advanced-function/" class="nav-link">
  高阶函数
</a></div><div class="nav-item"><a href="/typescript/" class="nav-link">
  TS
</a></div><div class="nav-item"><a href="/eight-essay/" class="nav-link">
  八股文
</a></div><div class="nav-item"><a href="/hand-writing/" class="nav-link">
  手写实现
</a></div><div class="nav-item"><a href="/mdn/" class="nav-link">
  MDN
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具方法
</a></div><div class="nav-item"><a href="https://link.qdzhou.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/principle/" class="nav-link">
  JS执行
</a></div><div class="nav-item"><a href="/design-mode/" class="nav-link">
  JS设计模式
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link router-link-active">
  JS进阶
</a></div><div class="nav-item"><a href="/advanced-function/" class="nav-link">
  高阶函数
</a></div><div class="nav-item"><a href="/typescript/" class="nav-link">
  TS
</a></div><div class="nav-item"><a href="/eight-essay/" class="nav-link">
  八股文
</a></div><div class="nav-item"><a href="/hand-writing/" class="nav-link">
  手写实现
</a></div><div class="nav-item"><a href="/mdn/" class="nav-link">
  MDN
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具方法
</a></div><div class="nav-item"><a href="https://link.qdzhou.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/advanced/" aria-current="page" class="sidebar-link">js 进阶</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>2-动画</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>3-高级api</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/advanced/3-高级api/JSB 原理与实践.html" class="sidebar-link">JSB 原理与实践</a></li><li><a href="/advanced/3-高级api/axios是如何封装HTTP请求的.html" class="sidebar-link">axios 是如何封装 HTTP 请求的</a></li><li><a href="/advanced/3-高级api/mutation-observer.html" class="sidebar-link">DOM 变动观察器（Mutation observer）</a></li><li><a href="/advanced/3-高级api/《You-Dont-Know-JS》笔记小计.html" class="active sidebar-link">《You-Dont-Know-JS》笔记小计</a></li><li><a href="/advanced/3-高级api/前端鉴权.html" class="sidebar-link">前端鉴权必须了解的5个兄弟：cookie、session、token、jwt、单点登录</a></li><li><a href="/advanced/3-高级api/发布订阅模式.html" class="sidebar-link">JavaScript的发布订阅模式</a></li><li><a href="/advanced/3-高级api/图解JavaScript继承.html" class="sidebar-link">图解 JavaScript 继承，一文搞定继承相关知识</a></li><li><a href="/advanced/3-高级api/基于js管理大文件上传以及断点续传.html" class="sidebar-link">基于js管理大文件上传以及断点续传</a></li><li><a href="/advanced/3-高级api/手写简易版的axios.html" class="sidebar-link">面试官不要再问我axios了？我能手写简易版的axios</a></li><li><a href="/advanced/3-高级api/页面生命周期.html" class="sidebar-link">页面生命周期：DOMContentLoaded，load，beforeunload，unload</a></li></ul></section></li><li><a href="/advanced/CORS完全手册之CORS详解.html" class="sidebar-link">CORS 完全手册之 CORS 详解</a></li><li><a href="/advanced/ES12新特性.html" class="sidebar-link">JavaScriptES12新特性抢先体验</a></li><li><a href="/advanced/前端模块化.html" class="sidebar-link">彻底掌握前端模块化</a></li><li><a href="/advanced/变量和类型-1.html" class="sidebar-link">变量和类型</a></li><li><a href="/advanced/变量和类型-2.html" class="sidebar-link">变量和类型-2</a></li><li><a href="/advanced/深入分析 JavaScript 模块循环引用.html" class="sidebar-link">深入分析 JavaScript 模块循环引用</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="《you-dont-know-js》笔记小计"><a href="#《you-dont-know-js》笔记小计" class="header-anchor">#</a> 《You-Dont-Know-JS》笔记小计</h2> <blockquote><p><a href="https://mp.weixin.qq.com/s/VFbZgJagqXRlWteGvEDW0A" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/VFbZgJagqXRlWteGvEDW0A<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h2 id="types-grammer"><a href="#types-grammer" class="header-anchor">#</a> types &amp; grammer</h2> <ol><li><p>判断以下结果</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> s <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>
s<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'B'</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> l <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">'abc'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
l<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'B'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>l<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><code>string</code> 及其包装对象 (Boxed Object) 是不可变 (immutable) 类型，因此不能改变它本身(modify in place)，所以 <code>String</code> 的所有方法都是返回一个新的字符串，而不会改变自身。</p></blockquote></li> <li><ul><li>You-Dont-Know-JS</li></ul></li> <li><p>如何逆序一个字符串？</p> <blockquote><p><code>s.split('').reverse().join('')</code></p></blockquote></li> <li><p>接上，为什么不能直接使用 <code>Array.prototype.reverse.call(s)</code> 逆序字符串？</p> <blockquote><p>当一个数组逆序时 <code>l.reverse()</code> 会改变 l 本身。正如第一题，<code>string</code> 不能改变自身。</p></blockquote></li> <li><p>判断以下结果，为什么会出现这样的情况，如何做出正确的比较？</p> <div class="language- extra-class"><pre class="language-text"><code>0.1 + 0.2 === 0.3;
0.8 - 0.6 === 0.2;
</code></pre></div><blockquote><p>浮点数根据 IEEE 754 标准存储64 bit 双精度，能够表示 2^64 个数，而浮点数是无穷的，代表有些浮点数必会有精度的损失，0.1，0.2 表示为二进制会有精度的损失。比较时引入一个很小的数值 <code>Number.EPSILON</code> 容忍误差，其值为 <code>2^-52</code>。</p> <div class="language- extra-class"><pre class="language-text"><code>function equal (a, b) {
  return Math.abs(a - b) &lt; Number.EPSILON
}
</code></pre></div></blockquote></li> <li><ul><li>You-Dont-Know-JS</li> <li>知乎</li></ul></li> <li><p>如何判断一个数值为整数？</p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>// ES6
Number.isInteger(num);

// ES5
if (!Number.isInteger) {
  Number.isInteger = function(num) {
    return typeof num == &quot;number&quot; &amp;&amp; num % 1 == 0;
  };
}
</code></pre></div></blockquote></li> <li><ul><li>You-Dont-Know-JS#user-content-testing-for-integers</li></ul></li> <li><p>如何判断一个数值为 +0？</p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>function isPosZero (n) {
  return n === 0 &amp;&amp; 1 / n === Infinity
}
</code></pre></div></blockquote></li> <li><p><code>'abc'.toUpperCase()</code> 中 'abc' 作为 primitive value，如何访问 <code>toUpperCase</code> 方法</p> <blockquote><p>当 <code>primitive value</code> 访问属性或者方法时，会自动转化为它的包装对象。另外也可以使用 <code>Object.prototype.valueOf()</code> 解包装(Unboxing)。</p></blockquote> <blockquote></blockquote></li> <li><ul><li>You-Dont-Know-JS#user-content-boxing-wrappers</li></ul></li> <li><p>判断以下结果 (Boxing Wrappers)</p> <div class="language- extra-class"><pre class="language-text"><code>function foo() {
  console.log(this)
}

foo.call(3);
</code></pre></div><blockquote><p>Number(3)。理由如上。</p></blockquote></li> <li><p>判断以下结果</p> <div class="language- extra-class"><pre class="language-text"><code>Array.isArray(Array.prototype)
</code></pre></div><blockquote><p>true 内置对象的 prototype 都不是纯对象，比如 <code>Date.prototype</code> 是 Date，<code>Set.prototype</code> 是 Set。</p></blockquote></li> <li><ul><li>You-Dont-Know-JS#user-content-native-prototypes</li></ul></li> <li><p>判断以下结果</p> <div class="language- extra-class"><pre class="language-text"><code>Boolean(new Boolean(false));
Boolean(document.all);

[] == '';
[3] == 3;
[] == false;
42 == true;
</code></pre></div><blockquote><p>new Boolean() 返回 object，为 true document.all，历史问题，参考这里Falsy value 指会被强制转化为 false 的值，有以下五种。除此之外全部会转化为 true</p> <p>You-Dont-Know-JS#user-content-toboolean</p></blockquote></li> <li><ul><li>undefined</li> <li>null</li> <li>false</li> <li>+0, -0, and NaN</li> <li>&quot;&quot;</li></ul></li> <li><p>找出以下代码问题 (TDZ)</p> <div class="language- extra-class"><pre class="language-text"><code>var a = 3;
let a;
</code></pre></div><blockquote><p>这是暂时性死域(Temporal Dead Zone)的问题，let a 声明之前，不能使用 a。</p></blockquote></li> <li><p>找出以下代码问题 (TDZ)</p> <div class="language- extra-class"><pre class="language-text"><code>var x = 3;

function foo (x=x) {
    // ..
}

foo()
</code></pre></div><blockquote><p>同样，在函数默认参数中，也有 TDZ。</p></blockquote></li></ol> <h2 id="scope-closures"><a href="#scope-closures" class="header-anchor">#</a> scope &amp; closures</h2> <ol><li><p><code>var a = 2</code> 中，<code>Engine</code>，<code>Scope</code>，<code>Compiler</code> 做了什么工作</p></li> <li><p>判断以下结果 (Lexical Scope)</p> <div class="language- extra-class"><pre class="language-text"><code>var scope = 'global scope';
function checkScope () {
  var scope = 'local scope';
  function f() {
    return scope; 
  }
  return f;
}

checkScope()();
</code></pre></div><blockquote><p>'local scope'</p> <p>由于 js 为词法作用域(Lexical Scope)，访问某个变量时，先在当前作用域中查找，如果查找不到则在嵌套作用域中查找，直到找到。如果找不到，则报 <code>ReferenceError</code>。</p></blockquote></li> <li><p>判断以下结果 (Hoisting)</p> <div class="language- extra-class"><pre class="language-text"><code>console.log(a);
var a = 3;
</code></pre></div><blockquote><p>undefined</p> <p>以上代码会被编译器理解为</p> <div class="language- extra-class"><pre class="language-text"><code>var a;
console.log(a);
a = 3;
</code></pre></div></blockquote></li> <li><p>判断以下结果 (Function First)</p> <div class="language- extra-class"><pre class="language-text"><code>var foo = 1;
function foo () {

}
console.log(foo);
</code></pre></div><blockquote><p>1。函数也会有提升，所以会被赋值覆盖。</p></blockquote></li> <li><p>判断以下结果 (IIFE &amp; Function First)</p> <div class="language- extra-class"><pre class="language-text"><code>var foo = 1;
(function () {
  foo = 2;
  function foo () {}

  console.log(foo);
})()

console.log(foo);
</code></pre></div><blockquote><p>2，1</p> <p>以上代码会被编译器理解为如下形式</p> <div class="language- extra-class"><pre class="language-text"><code>var foo = 1;
(function () {
  var foo;
  function foo () {
  }

  foo = 2;
  console.log(foo);
})()

console.log(foo);
</code></pre></div></blockquote></li> <li><p>判断以下结果，如何按序输出 (Closure)</p> <div class="language- extra-class"><pre class="language-text"><code>for (var i = 0; i &lt; 10; i++) {
  setTimeout(function () {
    console.log(i);
  }, 1000)
}
</code></pre></div><blockquote><p>大约 1s 之后连续输出 10 个 10。因为没有块级作用域，可以把 var 改成 let，也可以给 setTimeout 包装一层 IIFE。</p></blockquote></li></ol> <h2 id="this-object-prototypes"><a href="#this-object-prototypes" class="header-anchor">#</a> this &amp; object prototypes</h2> <blockquote><p>注意：以下均为浏览器环境中</p></blockquote> <ol><li><p>判断以下结果 (Default Binding)</p> <div class="language- extra-class"><pre class="language-text"><code>function foo() {
  &quot;use strict&quot;;
  console.log( this.a );
}

var a = 2;

foo();
</code></pre></div><blockquote><p>会报错，在函数的严格模式下，默认绑定其中的 this 指向 undefined。</p></blockquote></li> <li><p>判断以下结果</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;use strict&quot;;
var a = 2;
let b = 3;

console.log(this.a, this.b);
</code></pre></div><blockquote><p>2, undefined</p> <p>在浏览器环境中 this 指向 window，而 var 声明的变量会被挂在 window 上。而 let 声明的变量不会挂在 window 上。</p></blockquote></li> <li><p>判断以下结果 (Strict Mode &amp; Default Binding)</p> <div class="language- extra-class"><pre class="language-text"><code>function foo() {
  console.log( this.a );
}

var a = 2;

(function(){
  &quot;use strict&quot;;

  foo();
})();
</code></pre></div><blockquote><p>2</p> <p>只有存在 this 的函数中设置严格模式，this 为 undefined。因此会正常输出。</p></blockquote></li> <li><p>判断以下结果 (Hard Binding)</p> <div class="language- extra-class"><pre class="language-text"><code>function foo () {
  console.log(this.a);
}

const o1 = { a: 3 };
const o2 = { a: 4 };

foo.bind(o1).bind(o2)();
</code></pre></div><blockquote><p>3</p> <p>bind 为硬绑定，第一次绑定后 this 无法再次绑定。</p></blockquote></li> <li><p>如何实现 <code>Function.prototype.bind</code> 与 <code>Function.prototype.softBind</code></p> <blockquote><p>bind 为硬绑定，softBind 可以多次绑定 this。大致实现代码如下。bind 第二个参数可以预设函数参数，所以，bind 也是一个偏函数。另外，bind 也需要考虑 <code>new</code>的情况。<strong>「但以下示例主要集中在硬绑定和软绑定的差异之上。」</strong></p> <div class="language- extra-class"><pre class="language-text"><code>Function.prototype.fakeBind = function (obj) {
  var self = this;
  return function () {
    self.call(obj);
  }
}

Function.prototype.softBind = function(obj) {
  var self = this;
  return function () {
    self.call(this === window? obj : this);
  }
};
</code></pre></div></blockquote></li> <li><p><code>new</code> 的过程中发生了什么，判断以下结果 (new)</p> <div class="language- extra-class"><pre class="language-text"><code>function F () {
  this.a = 3;
  return {
    a: 4;
  }
}

const f = new F();
console.log(f.a);
</code></pre></div><blockquote><p>4</p> <p><code>new</code> 的过程大致为如下几个步骤</p> <p>因为函数最后显式返回了一个对象，所以打印为 4</p></blockquote></li> <li><ol><li>创建一个新的对象</li> <li>this 指向实例，并且执行函数</li> <li><strong>「如果没有显式返回，则默认返回这个实例」</strong></li></ol></li> <li><p>什么是 <code>data descriptor</code> 和 <code>accessor descriptor</code></p> <blockquote><p>两者均通过 <code>Object.defineProperty()</code> 定义，有两个公有的键值</p> <p>数据描述符有以下键值</p> <p>访问器描述符有以下键值</p> <div class="language- extra-class"><pre class="language-text"><code>const obj = {
  get a() {},
  set a(val) {}
}
</code></pre></div><p>Vue中 <code>computed</code> 的内部原理便是<code>get</code>，而 <code>watch</code> 的内部原理是 <code>set</code></p></blockquote></li> <li><ul><li>set</li> <li>get 另外，也可以通过字面量的形式表示访问器描述符</li></ul></li> <li><ul><li>writable 该键是否可以更改</li> <li>value</li></ul></li> <li><ul><li>configurable 设置该键是否可以删除</li> <li>enumerable 设置是否可被遍历</li></ul></li> <li><p>如何访问一个对象的属性？([[Get]])</p> <blockquote><p>访问对象的属性会触发 [[Get]] 操作，大致简述如下</p> <p>查找过程与 Scope 查找变量很相似，只不过，对象属性找不到，返回 undefined，而变量找不到报 Reference Error。</p></blockquote></li> <li><ol><li>是否被 Proxy 拦截，如果拦截，查看拦截器的返回值，如果没拦截，继续下一步</li> <li>检查自身属性，如果没找到则继续下一步</li> <li>如果没被找到，则在原型链上查找，如果没找到，则返回 undefined</li></ol></li> <li><p>如何对一个对象的属性赋值 ([[Put]])</p> <blockquote><p>对一个对象的属性赋值会触发 [[Put]] 操作，大致简述如下</p></blockquote></li> <li><ol><li>如果属性是访问描述符，则调用 setter 函数</li> <li>如果属性是 data descriptor，则检查 writable 是否可写。如果可写，被自身属性覆盖，否则在严格模式下将会报错</li> <li>普通属性，被自身属性覆盖</li> <li>如果属性是访问描述符，则调用 setter 函数</li> <li>如果属性是 data descriptor，则检查 writable 是否可写</li> <li>普通属性，直接赋值</li> <li>检查是否被 Proxy 拦截</li> <li>如果该对象属性为自身属性 (obj.hasOwnProperty('a') === true)</li> <li>如果该对象属性存在于原型链上</li> <li>如果该对象不存在与原型链上，直接给自身属性赋值</li></ol></li> <li><p>如何遍历一个对象 ($$iterator)</p> <blockquote><p>给对象设置 Symbol.iterator 属性</p></blockquote></li> <li><p>如何实现一个继承 (Object.create &amp; call)</p> <blockquote><p>在 ES6 时代可以简单的通过 class &amp; extends 实现继承，ES5 时代用如下方法</p> <div class="language- extra-class"><pre class="language-text"><code>function A () {}

function B () {
  A.call(this)
}

B.prototype = Object.create(A.prototype)
// B.prototype = new A()     不推荐
</code></pre></div></blockquote></li> <li><p>如何实现 <code>Object.create</code></p> <blockquote><p>至于为什么在继承的时候不推荐<code>new</code>，原因在于你很难保证 A 是一个纯函数，比如它会有自身属性，有可能操作 DOM 等。以下是一个简单版本的实现，省略了第二个参数。</p> <div class="language- extra-class"><pre class="language-text"><code>Object.create = function (o) {
  function F() {}
  F.prototype = o;
  return new F();
}
</code></pre></div></blockquote></li></ol></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/27/2022, 9:04:59 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/advanced/3-高级api/mutation-observer.html" class="prev">
        DOM 变动观察器（Mutation observer）
      </a></span> <span class="next"><a href="/advanced/3-高级api/前端鉴权.html">
        前端鉴权必须了解的5个兄弟：cookie、session、token、jwt、单点登录
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.6df8e219.js" defer></script><script src="/assets/js/2.e21ead49.js" defer></script><script src="/assets/js/21.5790bc21.js" defer></script>
  </body>
</html>
