<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JavaScript设计模式--前奏 | duangdong的note</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.png">
    <link rel="manifest" href="/manifest.json">
    <script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?0088ce24040b03f2947322ab31d23414";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
  </script>
    <script>
  var _hmt = _hmt || [];
  _hmt.push(['_requirePlugin', 'UrlChangeTracker', {
    shouldTrackUrlChange: function (newPath, oldPath) {
      newPath = newPath.split('#')[0];
      oldPath = oldPath.split('#')[0];
      return newPath != oldPath;
    }}
  ]);
  </script>
    <meta name="description" content="前端相关知识归纳总结">
    <meta name="keywords" content="qd-blog,node,vuepress,leetcode,algorithm">
    
    <link rel="preload" href="/assets/css/0.styles.a427ee9b.css" as="style"><link rel="preload" href="/assets/js/app.6df8e219.js" as="script"><link rel="preload" href="/assets/js/2.e21ead49.js" as="script"><link rel="preload" href="/assets/js/37.98506fd6.js" as="script"><link rel="prefetch" href="/assets/js/10.e0bdad61.js"><link rel="prefetch" href="/assets/js/100.82a4c820.js"><link rel="prefetch" href="/assets/js/101.f5d94e3b.js"><link rel="prefetch" href="/assets/js/102.7f36fa51.js"><link rel="prefetch" href="/assets/js/103.085df24a.js"><link rel="prefetch" href="/assets/js/104.76789169.js"><link rel="prefetch" href="/assets/js/105.9efb3db9.js"><link rel="prefetch" href="/assets/js/106.22337f5b.js"><link rel="prefetch" href="/assets/js/107.ac8e17b4.js"><link rel="prefetch" href="/assets/js/108.5fe47bcc.js"><link rel="prefetch" href="/assets/js/109.cf88a409.js"><link rel="prefetch" href="/assets/js/11.e801cea9.js"><link rel="prefetch" href="/assets/js/110.603c3bd4.js"><link rel="prefetch" href="/assets/js/111.26f89c7d.js"><link rel="prefetch" href="/assets/js/112.1ad5bc54.js"><link rel="prefetch" href="/assets/js/113.cde31a40.js"><link rel="prefetch" href="/assets/js/114.a1a2a895.js"><link rel="prefetch" href="/assets/js/115.31c25d8b.js"><link rel="prefetch" href="/assets/js/116.8ed4b493.js"><link rel="prefetch" href="/assets/js/117.c802c1ce.js"><link rel="prefetch" href="/assets/js/118.15aead28.js"><link rel="prefetch" href="/assets/js/119.c26b6aad.js"><link rel="prefetch" href="/assets/js/12.9ed8f981.js"><link rel="prefetch" href="/assets/js/120.c3410f53.js"><link rel="prefetch" href="/assets/js/121.357fc3f4.js"><link rel="prefetch" href="/assets/js/122.6ecee0a8.js"><link rel="prefetch" href="/assets/js/123.6b38e86a.js"><link rel="prefetch" href="/assets/js/124.463231bb.js"><link rel="prefetch" href="/assets/js/125.dc9f9675.js"><link rel="prefetch" href="/assets/js/126.97f340de.js"><link rel="prefetch" href="/assets/js/127.080209f1.js"><link rel="prefetch" href="/assets/js/128.dd7fed27.js"><link rel="prefetch" href="/assets/js/129.e9a49c7b.js"><link rel="prefetch" href="/assets/js/13.fb60e043.js"><link rel="prefetch" href="/assets/js/130.86b31ea7.js"><link rel="prefetch" href="/assets/js/131.be4dca8f.js"><link rel="prefetch" href="/assets/js/132.a4e032bd.js"><link rel="prefetch" href="/assets/js/133.545d53fa.js"><link rel="prefetch" href="/assets/js/134.ef4512f0.js"><link rel="prefetch" href="/assets/js/135.b15ec030.js"><link rel="prefetch" href="/assets/js/136.14e63782.js"><link rel="prefetch" href="/assets/js/137.671e87f8.js"><link rel="prefetch" href="/assets/js/138.b3d28a52.js"><link rel="prefetch" href="/assets/js/139.bc5e381c.js"><link rel="prefetch" href="/assets/js/14.63057fe7.js"><link rel="prefetch" href="/assets/js/140.ce3a69fc.js"><link rel="prefetch" href="/assets/js/141.09737b5b.js"><link rel="prefetch" href="/assets/js/142.49e3bb24.js"><link rel="prefetch" href="/assets/js/143.45031fa6.js"><link rel="prefetch" href="/assets/js/144.458e287e.js"><link rel="prefetch" href="/assets/js/145.9d21ff24.js"><link rel="prefetch" href="/assets/js/146.88d47473.js"><link rel="prefetch" href="/assets/js/147.277b5759.js"><link rel="prefetch" href="/assets/js/148.0dd5c138.js"><link rel="prefetch" href="/assets/js/149.d638ab21.js"><link rel="prefetch" href="/assets/js/15.3ac2cfb4.js"><link rel="prefetch" href="/assets/js/150.834eb5ca.js"><link rel="prefetch" href="/assets/js/151.0b833f48.js"><link rel="prefetch" href="/assets/js/152.d212207c.js"><link rel="prefetch" href="/assets/js/153.e8b1311a.js"><link rel="prefetch" href="/assets/js/154.74eb8531.js"><link rel="prefetch" href="/assets/js/16.f2129a31.js"><link rel="prefetch" href="/assets/js/17.27a38c73.js"><link rel="prefetch" href="/assets/js/18.ec5b4213.js"><link rel="prefetch" href="/assets/js/19.553ed8c2.js"><link rel="prefetch" href="/assets/js/20.c1bf3bbb.js"><link rel="prefetch" href="/assets/js/21.5790bc21.js"><link rel="prefetch" href="/assets/js/22.29894e1b.js"><link rel="prefetch" href="/assets/js/23.bae1a497.js"><link rel="prefetch" href="/assets/js/24.1edc62bc.js"><link rel="prefetch" href="/assets/js/25.69b254ca.js"><link rel="prefetch" href="/assets/js/26.df57f236.js"><link rel="prefetch" href="/assets/js/27.9ae48125.js"><link rel="prefetch" href="/assets/js/28.d42d4bb6.js"><link rel="prefetch" href="/assets/js/29.f3630e2f.js"><link rel="prefetch" href="/assets/js/3.5c47a171.js"><link rel="prefetch" href="/assets/js/30.40cf5507.js"><link rel="prefetch" href="/assets/js/31.99b2787c.js"><link rel="prefetch" href="/assets/js/32.eef578d9.js"><link rel="prefetch" href="/assets/js/33.6755a6d2.js"><link rel="prefetch" href="/assets/js/34.add65d5c.js"><link rel="prefetch" href="/assets/js/35.3e4a0da9.js"><link rel="prefetch" href="/assets/js/36.9d4bd3f9.js"><link rel="prefetch" href="/assets/js/38.44bce283.js"><link rel="prefetch" href="/assets/js/39.62bf281f.js"><link rel="prefetch" href="/assets/js/4.8f6f0475.js"><link rel="prefetch" href="/assets/js/40.3a389edd.js"><link rel="prefetch" href="/assets/js/41.a309beb7.js"><link rel="prefetch" href="/assets/js/42.4e87216c.js"><link rel="prefetch" href="/assets/js/43.c6f6922b.js"><link rel="prefetch" href="/assets/js/44.fda8b3de.js"><link rel="prefetch" href="/assets/js/45.5a1c5b3b.js"><link rel="prefetch" href="/assets/js/46.289cbb81.js"><link rel="prefetch" href="/assets/js/47.81850ce8.js"><link rel="prefetch" href="/assets/js/48.e986629d.js"><link rel="prefetch" href="/assets/js/49.d04a41c3.js"><link rel="prefetch" href="/assets/js/5.8b87f02a.js"><link rel="prefetch" href="/assets/js/50.727fb121.js"><link rel="prefetch" href="/assets/js/51.a10ac8b0.js"><link rel="prefetch" href="/assets/js/52.4fffa0ef.js"><link rel="prefetch" href="/assets/js/53.03ab34e0.js"><link rel="prefetch" href="/assets/js/54.f05ee208.js"><link rel="prefetch" href="/assets/js/55.f90df177.js"><link rel="prefetch" href="/assets/js/56.86a4d03e.js"><link rel="prefetch" href="/assets/js/57.c8cee71c.js"><link rel="prefetch" href="/assets/js/58.0b503f53.js"><link rel="prefetch" href="/assets/js/59.c4daebc4.js"><link rel="prefetch" href="/assets/js/6.2f86309f.js"><link rel="prefetch" href="/assets/js/60.b9584ba1.js"><link rel="prefetch" href="/assets/js/61.fa6e5de3.js"><link rel="prefetch" href="/assets/js/62.4f67908f.js"><link rel="prefetch" href="/assets/js/63.0c9d8ccc.js"><link rel="prefetch" href="/assets/js/64.2754e515.js"><link rel="prefetch" href="/assets/js/65.f2bd6dd5.js"><link rel="prefetch" href="/assets/js/66.299c952c.js"><link rel="prefetch" href="/assets/js/67.2ccaf3ef.js"><link rel="prefetch" href="/assets/js/68.b6e197f0.js"><link rel="prefetch" href="/assets/js/69.b821ea5d.js"><link rel="prefetch" href="/assets/js/7.f1cc41de.js"><link rel="prefetch" href="/assets/js/70.7beae76c.js"><link rel="prefetch" href="/assets/js/71.d452a791.js"><link rel="prefetch" href="/assets/js/72.f3fd5168.js"><link rel="prefetch" href="/assets/js/73.0804c5f0.js"><link rel="prefetch" href="/assets/js/74.cdcdfbcc.js"><link rel="prefetch" href="/assets/js/75.e8e01c97.js"><link rel="prefetch" href="/assets/js/76.6801837d.js"><link rel="prefetch" href="/assets/js/77.04408d97.js"><link rel="prefetch" href="/assets/js/78.9130c8b3.js"><link rel="prefetch" href="/assets/js/79.dcf60589.js"><link rel="prefetch" href="/assets/js/8.89fa1943.js"><link rel="prefetch" href="/assets/js/80.efe0c1a1.js"><link rel="prefetch" href="/assets/js/81.8220fef3.js"><link rel="prefetch" href="/assets/js/82.ae2099d2.js"><link rel="prefetch" href="/assets/js/83.c563f161.js"><link rel="prefetch" href="/assets/js/84.e365194b.js"><link rel="prefetch" href="/assets/js/85.15de0cdb.js"><link rel="prefetch" href="/assets/js/86.b99959c5.js"><link rel="prefetch" href="/assets/js/87.6fccf3fc.js"><link rel="prefetch" href="/assets/js/88.9bc0613a.js"><link rel="prefetch" href="/assets/js/89.89530022.js"><link rel="prefetch" href="/assets/js/9.7637f327.js"><link rel="prefetch" href="/assets/js/90.53d12303.js"><link rel="prefetch" href="/assets/js/91.c55896d7.js"><link rel="prefetch" href="/assets/js/92.0fe1f724.js"><link rel="prefetch" href="/assets/js/93.d681c01d.js"><link rel="prefetch" href="/assets/js/94.ed89d267.js"><link rel="prefetch" href="/assets/js/95.96e675de.js"><link rel="prefetch" href="/assets/js/96.5ad7361e.js"><link rel="prefetch" href="/assets/js/97.e7f32727.js"><link rel="prefetch" href="/assets/js/98.c3a03e67.js"><link rel="prefetch" href="/assets/js/99.31f54446.js">
    <link rel="stylesheet" href="/assets/css/0.styles.a427ee9b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">duangdong的note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/principle/" class="nav-link">
  JS执行
</a></div><div class="nav-item"><a href="/design-mode/" class="nav-link router-link-active">
  JS设计模式
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  JS进阶
</a></div><div class="nav-item"><a href="/advanced-function/" class="nav-link">
  高阶函数
</a></div><div class="nav-item"><a href="/typescript/" class="nav-link">
  TS
</a></div><div class="nav-item"><a href="/eight-essay/" class="nav-link">
  八股文
</a></div><div class="nav-item"><a href="/hand-writing/" class="nav-link">
  手写实现
</a></div><div class="nav-item"><a href="/mdn/" class="nav-link">
  MDN
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具方法
</a></div><div class="nav-item"><a href="https://link.qdzhou.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/node/" class="nav-link">
  Node
</a></div><div class="nav-item"><a href="/principle/" class="nav-link">
  JS执行
</a></div><div class="nav-item"><a href="/design-mode/" class="nav-link router-link-active">
  JS设计模式
</a></div><div class="nav-item"><a href="/advanced/" class="nav-link">
  JS进阶
</a></div><div class="nav-item"><a href="/advanced-function/" class="nav-link">
  高阶函数
</a></div><div class="nav-item"><a href="/typescript/" class="nav-link">
  TS
</a></div><div class="nav-item"><a href="/eight-essay/" class="nav-link">
  八股文
</a></div><div class="nav-item"><a href="/hand-writing/" class="nav-link">
  手写实现
</a></div><div class="nav-item"><a href="/mdn/" class="nav-link">
  MDN
</a></div><div class="nav-item"><a href="/tools/" class="nav-link">
  工具方法
</a></div><div class="nav-item"><a href="https://link.qdzhou.cn" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Home
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/design-mode/" aria-current="page" class="sidebar-link">js设计模式</a></li><li><a href="/design-mode/function.html" class="sidebar-link">javascript中的类的构造</a></li><li><a href="/design-mode/js设计模式.html" class="active sidebar-link">JavaScript设计模式--前奏</a></li><li><a href="/design-mode/代理模式.html" class="sidebar-link">设计模式之代理模式</a></li><li><a href="/design-mode/单例模式.html" class="sidebar-link">单例模式</a></li><li><a href="/design-mode/工厂模式.html" class="sidebar-link">设计模式之工厂模式</a></li><li><a href="/design-mode/建造者模式.html" class="sidebar-link">设计模式之建造者模式</a></li><li><a href="/design-mode/策略模式.html" class="sidebar-link">设计模式之策略模式</a></li><li><a href="/design-mode/装饰者模式.html" class="sidebar-link">设计模式之装饰者模式</a></li><li><a href="/design-mode/观察者模式.html" class="sidebar-link">设计模式之观察者模式</a></li><li><a href="/design-mode/设计模式的通俗解释.html" class="sidebar-link">23 种设计模式的通俗解释，虽然有点污，但是秒懂</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="javascript设计模式-前奏"><a href="#javascript设计模式-前奏" class="header-anchor">#</a> JavaScript设计模式--前奏</h2> <p><strong>设计模式应遵守的原则：</strong>
（1）最少知识原则：一个软件实体应当尽可能少地与其他实体发生相互作用（把对象划分成较小的粒度，以便提高复用性）
（2）开放-封闭原则：软件实体（类、模块、函数）等应该是可以扩展的，但是不可修改。</p> <p>一、原型模式</p> <p>JavaScript基于原型的委托机制实现对象与对象之间的继承。
当对象无法响应某个请求时，会把该请求委托给它自己的原型。
构造器有原型，实例对象没有原型，有一个名为<strong>proto</strong>的属性，其默认指向它的构造器的原型对象，即{constructor}.prototype。
<strong>示例一：</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>var obj = {name: &quot;ligang&quot;};var A = function() {};
A.prototype = obj;var a = new A();
console.log(a.name);  // ligang
</code></pre></div></blockquote> <p>（1）遍历对象a中所有属性，未找到name属性
（2）查找name属性的请求被委托给对象a的对象构造器的原型，它被a.<strong>proto</strong>记录着并且指向A.prototype，而其被设置为对象obj
（3）在对象obj中找到name属性，并返回。
<strong>示例二：</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>var obj = {name: &quot;ligang&quot;};var A = function(name) {
    this.name = name;
};
A.prototype = obj;var a = new A();
console.log(a.name);  // undefined
</code></pre></div></blockquote> <p>（1）首选遍历对象a中的所有属性，存在name属性，但未赋值</p> <p><strong>示例三：</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>var obj = {name: &quot;ligang&quot;};var A = function() {};
A.prototype = obj;var B = function() {};
B.prototype = new A();var b = new B();
console.log(b.name);    // ligang
</code></pre></div></blockquote> <p>查找顺序：
b对象 –&gt; b.<strong>proto</strong>(即：B.prototype) –&gt; new A()对象 –&gt; B.prototype –&gt; obj</p> <p>二、this</p> <h2 id="_1-词法作用域"><a href="#_1-词法作用域" class="header-anchor">#</a> 1. 词法作用域</h2> <p>首先明确JavaScript只具备词法作用域（书写代码时函数声明的位置来决定），不具备动态作用域。通过下述示例说明。
备注：词法作用域详见：《JavaScript词法作用域（你不知道的JavaScript）》
<strong>示例一：</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>function foo() {
    console.log(a);
}function bar() {
    var a = 1;
    foo();  
}
bar();      // ReferenceError
</code></pre></div></blockquote> <p><strong>示例二：</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>function foo() {
    console.log(this.a);        
// this指向window
}
function bar() {
    var a = 1;
    foo();  
}
bar();     
 // undefined
</code></pre></div></blockquote> <p><strong>示例三：</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>function foo() {
    console.log(this.a);
}function bar() {
    this.a = 1;
    foo();
}
bar();      // 1
</code></pre></div></blockquote> <p>如果JavaScript存在动态作用域，示例一的结果应该为1。</p> <h2 id="_2-this"><a href="#_2-this" class="header-anchor">#</a> 2. this</h2> <p>下面补充几点this注意事项
备注：关于this详见：《JavaScript中的this（你不知道的JavaScript）》</p> <p>（1）this指向（构造器调用）
<strong>示例一：</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>var MyClass = function() {
    this.age = 25;    this.name = &quot;ligang&quot;;
};var obj = new MyClass();
console.log(&quot;姓名：&quot; +　obj.name + &quot; 年龄：&quot; + obj.age);  
 // 姓名：ligang    年龄：25
</code></pre></div></blockquote> <p><strong>示例二：</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>var MyClass = function() {
    this.age = 25;    this.name = &quot;ligang&quot;;    return {
        name: &quot;camile&quot;
    };
};var obj = new MyClass();
console.log(&quot;姓名：&quot; +　obj.name + &quot; 年龄：&quot; + obj.age);   
// 姓名：camile 年龄：undefined
</code></pre></div></blockquote> <p>**注意：**如果构造器显式地返回一个object类型的对象，那么此次运算最终返回这个对象，而不是我们之前期待的this。</p> <h2 id="_3-指定函数内部this指向"><a href="#_3-指定函数内部this指向" class="header-anchor">#</a> 3. 指定函数内部this指向</h2> <p>call、apply、Function.prototype.bind
其中Function.prototype.bind部分浏览器不兼容，兼容性请查看http://caniuse.com/
<strong>模拟实现Function.prototype.bind：</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>Function.prototype.bind = function() {
    var self = this,
        context = [].shift.call(arguments),
        args = [].slice.call(arguments);    
return function() {
        return self.apply(context, 
[].concat.call(args, 
[].slice.call(arguments)));
    };
};
// 测试
var obj = {
    name: &quot;ligang&quot;};
var func = function(a, b, c) {
    console.log(this.name);
    console.log([a, b, c])
}.bind(obj, 1, 2);

func(3);
</code></pre></div></blockquote> <p>三、闭包和高阶函数</p> <h2 id="_1-闭包"><a href="#_1-闭包" class="header-anchor">#</a> 1. 闭包</h2> <p>对象以方法的形式包含了过程，而闭包则是在过程中一环境的形式包含了数据。
<strong>示例：缓存机制</strong></p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>var mult = (function() {
    var cache = {};    return function() {
        var args = Array.prototype.join.call(arguments, &quot;,&quot;);   
     if(args in cache) {            
     return cache[args];
        }       
 var a = 1;       
  for(var i = 0,
   l = arguments.length; i &lt; l; i++) {
            a = a * arguments[i];
        }        return cache[args] = a;
    }
})();

console.log(mult(1, 2, 3));
console.log(mult(1, 2, 3));     
// 再次计算，直接从缓存中取
</code></pre></div></blockquote> <p>**注意：**闭包容易导致循环引用，从而导致内存溢出。可以通过把这些变量置为null，回收这些变量。</p> <h2 id="_2-高阶函数"><a href="#_2-高阶函数" class="header-anchor">#</a> 2. 高阶函数</h2> <p>高阶函数：函数作为参数传递；函数作为返回值输出。
（1）回调函数</p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>function fun(callback) {
    console.log(1);    
if(typeof callback === 'function'){
        setTimeout(function() {
            callback();
        });
    }
}

fun(function(){console.log(2);});
</code></pre></div></blockquote> <p>（2）判断数据类型</p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>var isType = function(type) {return function(obj) {
 return Object.prototype.toString.call(obj) === '[object' + type + ']';
    }
};
var isArray = isType(&quot;Array&quot;);
var isNumber = isType(&quot;Number&quot;);

isArray([]);
isNumber(&quot;123&quot;);
</code></pre></div></blockquote> <p>（3）单例</p> <blockquote><div class="language- extra-class"><pre class="language-text"><code>var getSingle = function(fn) {
    var result;    
return function() {
        return result || (result = fn.apply(this, arguments));
    };
};
function testSingle(){}
getSingle(testSingle)() === getSingle(testSingle)();   
 // true
</code></pre></div></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">5/27/2022, 9:04:59 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/design-mode/function.html" class="prev">
        javascript中的类的构造
      </a></span> <span class="next"><a href="/design-mode/代理模式.html">
        设计模式之代理模式
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.6df8e219.js" defer></script><script src="/assets/js/2.e21ead49.js" defer></script><script src="/assets/js/37.98506fd6.js" defer></script>
  </body>
</html>
